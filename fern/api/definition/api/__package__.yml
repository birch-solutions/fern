service:
  base-path: /apis
  auth: false
  endpoints:
    get:
      method: GET
      path: /{apiId}
      path-parameters:
        apiId: ApiId
      response: Api

types:
  ApiId: string

  Api:
    properties:
      id: ApiId
      displayName: string
      definition: ApiDefinition

  ApiDefinition:
    properties:
      services: list<Service>
      types: map<TypeId, TypeDefinition>

  Service:
    properties:
      endpoints: list<Endpoint>

  Endpoint:
    properties:
      path: EndpointPath
      request: optional<TypeReference>
      response: optional<TypeReference>

  EndpointPath:
    properties:
      parts: list<EndpointPathPart>

  EndpointPathPart:
    union:
      literal: string
      pathParameter: EndpointPathParameter

  EndpointPathParameter:
    properties:
      name: string
      parameterType: TypeReference

  TypeId: string

  TypeDefinition:
    union:
      alias: TypeReference
      enum: EnumType
      union: UnionType
      object: ObjectType

  TypeReference:
    union:
      primitive: PrimitiveType
      container: ContainerType
      unknown: {}
      reference: TypeId
      definition: TypeDefinition

  ObjectType:
    properties:
      extends: list<TypeId>
      properties: list<ObjectProperty>

  ObjectProperty:
    properties:
      key: string
      value: TypeReference

  PrimitiveType:
    union:
      integer: {}
      double: {}
      long: {}
      string: {}
      boolean: {}
      datetime: {}
      uuid: {}

  ContainerType:
    union:
      optional: OptionalType
      list: ListType
      set: SetType
      map: MapType

  OptionalType:
    properties:
      itemType: TypeReference

  ListType:
    properties:
      itemType: TypeReference

  SetType:
    properties:
      itemType: TypeReference

  MapType:
    properties:
      keyType: TypeReference
      valueType: TypeReference

  EnumType:
    properties:
      values: list<string>

  UnionType:
    properties:
      discriminant: string
      members: list<UnionMember>

  UnionMember:
    properties:
      discriminantValue: string
      additionalProperties: ObjectType
