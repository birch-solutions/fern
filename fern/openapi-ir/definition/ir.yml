types:
  OpenAPIIntermediateRepresentation:
    properties:
      title: optional<string>
      description: optional<string>
      servers: list<Server>
      tags: map<TagId, Tag>
      hasEndpointsMarkedInternal: boolean
      endpoints: list<Endpoint>
      webhooks: list<Webhook>
      schemas: map<SchemaId, Schema>
      errors: map<StatusCode, HttpError>
      variables: map<string, PrimitiveSchema>
      nonRequestReferencedSchemas:
        type: set<SchemaId>
        docs: Whether the schema is directly referenced from a response, parameters, or other schemas
      securitySchemes: map<SecuritySchemeId, SecurityScheme>

  WithDescription:
    properties:
      description: optional<string>

  WithSchemaId:
    properties:
      schemaId: SchemaId

  WithName:
    properties:
      nameOverride:
        type: optional<string>
        docs: Read from `x-fern-type-name`.
      generatedName:
        type: string
        docs: |
          An autogenerated name for a type based on the hierarchy 
          of the type declarations. 
          [MyType -> propA -> propB] will turn into MyTypePropAPropB
          [MyType] will turn into MyType

  StatusCode:
    type: integer

  HttpError:
    extends:
      - WithDescription
      - WithName
    properties:
      schema: optional<Schema>

  Server:
    extends: WithDescription
    properties:
      name:
        type: optional<string>
        docs: Populated by `X-Server-Name`
      url: string

  TagId:
    type: string
    docs: The name of the tag.

  Tag:
    extends: WithDescription
    properties:
      id: TagId

  SchemaId:
    type: string
    docs: |
      The name of the schema. For nested properties, the name of the schema will
      be the dot-delimited form of the property, e.g. foo.bar.baz.

  SecuritySchemeId:
    type: string
    docs: The name of the security scheme.

  SecurityScheme:
    union:
      basic: BasicSecurityScheme
      bearer: BearerSecurityScheme
      header: HeaderSecurityScheme
      query:
        type: QuerySecurityScheme
        docs: parameter sent as a security scheme

  BearerSecurityScheme:
    properties:
      tokenVariableName: optional<string>

  BasicSecurityScheme:
    properties:
      usernameVariableName: optional<string>
      passwordVariableName: optional<string>

  HeaderSecurityScheme:
    properties:
      headerName: string
      prefix: optional<string>

  QuerySecurityScheme:
    properties:
      queryParameterName: string

  Webhook:
    extends: WithDescription
    properties:
      method: WebhookHttpMethod
      summary: optional<string>
      operationId: string
      tags: list<TagId>
      headers: list<Header>
      generatedPayloadName:
        type: string
        docs: |
          Populated as ${operationId}Payload
      payload: Schema

  WebhookHttpMethod:
    enum:
      - GET
      - POST

  EndpointAvailability:
    enum:
      - GenerallyAvailable
      - Beta
      - Deprecated

  Endpoint:
    extends: WithDescription
    properties:
      authed: boolean
      internal: optional<boolean>
      method: HttpMethod
      availability: optional<EndpointAvailability>
      audiences: list<string>
      path:
        type: string
        docs: |
          This string includes templated path parameters. 
          For example, `/users/{userId}` is a valid value.
      summary: optional<string>
      operationId: optional<string>
      tags: list<TagId>
      pathParameters: list<PathParameter>
      queryParameters: list<QueryParameter>
      headers: list<Header>
      sdkName: optional<EndpointSdkName>
      generatedRequestName:
        type: string
        docs: |
          Populated as ${operationId}Request
      requestNameOverride:
        type: optional<string>
        docs: |
          Populated by `x-request-name` on a path object.
      request: optional<Request>
      response: optional<Response>
      errorStatusCode: list<StatusCode>
      server: list<Server>
      examples: list<EndpointExample>

  EndpointExample:
    docs: |
      A complete example associated with the endpoint. All child
      examples will be fully complete (i.e. there will be no
      PartialObjectExamples).
    properties:
      pathParameters: optional<list<PathParameterExample>>
      queryParameters: optional<list<QueryParameterExample>>
      headers: optional<list<HeaderExample>>
      request: optional<Example>
      response: optional<Example>

  PathParameterExample:
    properties:
      name: string
      value: Example

  QueryParameterExample:
    properties:
      name: string
      value: Example

  HeaderExample:
    properties:
      name: string
      value: Example

  EndpointSdkName:
    properties:
      groupName:
        type: list<string>
        docs: This is populated by `x-fern-sdk-method-name`
      methodName:
        type: string
        docs: This is populated by `x-fern-sdk-group-name`

  HttpMethod:
    enum:
      - GET
      - POST
      - PUT
      - PATCH
      - DELETE
      - HEAD
      - OPTIONS
      - TRACE

  PathParameter:
    extends: WithDescription
    properties:
      name: string
      schema: Schema
      variableReference: optional<string>
      examples: optional<list<Example>>

  QueryParameter:
    extends: WithDescription
    properties:
      name: string
      schema: Schema
      examples: optional<list<Example>>

  Header:
    extends: WithDescription
    properties:
      name: string
      schema: Schema
      examples: optional<list<Example>>

  Request:
    union:
      octetStream: OctetStremRequest
      multipart: MultipartRequest
      json: JsonRequest

  OctetStremRequest:
    extends: WithDescription
    properties: {}

  JsonRequest:
    extends: WithDescription
    properties:
      schema: Schema
      contentType: optional<string>
      examples: optional<list<Example>>

  MultipartRequest:
    extends: WithDescription
    properties:
      name:
        type: optional<string>
        docs: If multipart was a reference, this will be the schema name.
      properties: list<MultipartRequestProperty>

  MultipartRequestProperty:
    extends: WithDescription
    properties:
      key: string
      schema: MultipartSchema

  MultipartSchema:
    union:
      file: {}
      json: Schema

  Response:
    union:
      file: FileResponse
      json: JsonResponse
      text: TextResponse
      streamingText: TextResponse
      streamingJson:
        type: JsonResponse
        docs: Checks if `x-fern-streaming` is present and is true.

  FileResponse:
    extends: WithDescription

  TextResponse:
    extends: WithDescription

  JsonResponse:
    extends: WithDescription
    properties:
      schema: Schema
      examples: optional<list<Example>>

  Example:
    docs: A complete example associated with a SchemaId.
    union:
      primitive: PrimitiveExample
      object: ObjectExample
      array: ArrayExample
      map: MapExample
      optional: OptionalExample
      enum: EnumExample
      reference: Example
      literal: LiteralExample
      oneOf: OneOfExample
      nullable: NullableExample
      unknown: {}

  PartialExample:
    docs: A (potentially) partial example associated with a SchemaId.
    union:
      primitive: PrimitiveExample
      object: ObjectExample
      partialObject: PartialObjectExample
      array: ArrayExample
      map: MapExample
      optional: OptionalExample
      enum: EnumExample
      reference: ReferencedExample
      literal: LiteralExample
      oneOf: OneOfExample
      nullable: NullableExample
      unknown: {}

  ObjectExample:
    properties:
      properties: map<string, Example>

  PartialObjectExample:
    properties:
      includedProperties: map<string, Example>
      excludedProperties: list<string>

  ArrayExample:
    properties:
      elements: list<Example>

  MapExample:
    properties:
      pairs: list<MapExamplePair>

  MapExamplePair:
    properties:
      key: PrimitiveExample
      value: Example

  OptionalExample:
    properties:
      example: Example

  EnumExample:
    properties:
      examples: list<EnumValueExample>

  EnumValueExample:
    properties:
      value: string

  ReferencedExample:
    properties:
      reference: string

  LiteralExample: string

  OneOfExample:
    union:
      discriminated: DiscriminatedOneOfExample
      undisciminated: UnDiscriminatedOneOfExample

  DiscriminatedOneOfExample:
    properties:
      examples: map<string, Example>

  UnDiscriminatedOneOfExample:
    properties:
      examples: list<Example>

  NullableExample:
    properties:
      example: Example

  PrimitiveExample:
    union:
      int: IntExample
      int64: Int64Example
      float: FloatExample
      double: DoubleExample
      string: StringExample
      datetime: DatetimeExample
      date: DateExample
      base64: Base64Example
      boolean: BooleanExample

  IntExample: integer
  Int64Example: long
  FloatExample: double
  DoubleExample: double
  StringExample: string
  DatetimeExample: datetime
  DateExample: date
  Base64Example: base64
  BooleanExample: boolean

  Schema:
    docs: All instances of a Schema define a SchemaId.
    union:
      primitive: PrimitiveSchema
      object: ObjectSchema
      array: ArraySchema
      map: MapSchema
      optional: OptionalSchema
      enum: EnumSchema
      reference: ReferencedSchema
      literal: LiteralSchema
      oneOf: OneOfSchema
      nullable: NullableSchema
      unknown: UnknownSchema

  PrimitiveSchema:
    extends:
      - WithDescription
      - WithSchemaId
    properties:
      schema: PrimitiveSchemaValue

  PrimitiveSchemaValue:
    union:
      int: IntSchema
      int64: Int64Schema
      float: FloatSchema
      double: DoubleSchema
      string: StringSchema
      datetime: DatetimeSchema
      date: DateSchema
      base64: Base64Schema
      boolean: BooleanSchema

  IntSchema:
    properties:
      examples: list<IntExample>

  Int64Schema:
    properties:
      examples: list<Int64Example>

  FloatSchema:
    properties:
      examples: list<FloatExample>

  DoubleSchema:
    properties:
      examples: list<DoubleExample>

  StringSchema:
    properties:
      minLength: optional<integer>
      maxLength: optional<integer>
      examples: list<StringExample>

  DatetimeSchema:
    properties:
      examples: list<DatetimeExample>

  DateSchema:
    properties:
      examples: list<DateExample>

  Base64Schema:
    properties:
      examples: list<Base64Example>

  BooleanSchema:
    properties:
      examples: list<BooleanExample>

  LiteralSchema:
    extends:
      - WithDescription
      - WithSchemaId
    properties:
      value: string
      examples: list<LiteralExample>

  ObjectSchema:
    extends:
      - WithDescription
      - WithName
      - WithSchemaId
    properties:
      allOf: list<ReferencedSchema>
      properties: list<ObjectProperty>
      allOfPropertyConflicts: list<AllOfPropertyConflict>
      examples: list<PartialObjectExample>

  # OpenAPI IR to Fern:
  # For every allOfPropertyConflict, we will inline the SchemaIds that conflict.
  # If the property conflict has conflicting type signatures, then we will make the type unknown.
  AllOfPropertyConflict:
    properties:
      propertyKey: string
      allOfSchemaIds:
        type: list<SchemaId>
        docs: The allOf schemas that conflict with each other
      conflictingTypeSignatures:
        type: boolean
        docs: If the allOf schemas have different types. Unclear how to resolve this. Possibly make the property unknown?

  ObjectProperty:
    properties:
      key: string
      schema: Schema
      conflict:
        type: map<SchemaId, ObjectPropertyConflictInfo>
        docs: The schemas that conflict with this property
      generatedName:
        type: string
        docs: |
          A unique name for the property.

  ObjectPropertyConflictInfo:
    properties:
      differentSchema: boolean

  ArraySchema:
    extends:
      - WithDescription
      - WithSchemaId
    properties:
      value: Schema
      examples: optional<list<ArrayExample>>

  MapSchema:
    extends:
      - WithDescription
      - WithSchemaId
    properties:
      key: PrimitiveSchema
      value: Schema

  OptionalSchema:
    extends:
      - WithDescription
      - WithSchemaId
    properties:
      value: Schema

  NullableSchema:
    extends:
      - WithDescription
      - WithSchemaId
    properties:
      value: Schema

  UnknownSchema:
    extends:
      - WithDescription
      - WithSchemaId
    properties:
      value: Schema

  EnumSchema:
    extends:
      - WithDescription
      - WithName
      - WithSchemaId
    properties:
      values: list<EnumValue>

  EnumValue:
    extends:
      - WithDescription
    properties:
      nameOverride:
        type: optional<string>
        docs: Codegen friendly name. Read from `X-Enum-Names`
      generatedName:
        type: string
        docs: Codegen friendly name. Generated by removing unalphanumeric characters and camel casing.
      value:
        type: string
        docs: Value of the enum

  ReferencedSchema:
    extends:
      - WithDescription
      - WithName
      - WithSchemaId

  OneOfSchema:
    union:
      discriminated: DiscriminatedOneOfSchema
      undisciminated: UnDiscriminatedOneOfSchema

  DiscriminatedOneOfSchema:
    extends:
      - WithDescription
      - WithName
      - WithSchemaId
    properties:
      discriminantProperty: string
      commonProperties: list<CommonProperty>
      schemas: map<string, Schema>

  CommonProperty:
    properties:
      key: string
      schema: Schema

  UnDiscriminatedOneOfSchema:
    extends:
      - WithDescription
      - WithName
      - WithSchemaId
    properties:
      schemas: list<Schema>
