imports:
  commons: commons.yml
types:
  Api:
    properties:
      apiId: commons.ApiId
      apiName: string
      rootPackages: list<commons.PackageId>

      packages: map<commons.PackageId, Package>
      endpoints: map<commons.EndpointId, Endpoint>
      types: map<commons.TypeId, Type>
      errors: map<commons.ErrorId, Error>

  Package:
    properties:
      packageId: commons.PackageId
      packageName: string
      packages: list<commons.PackageId>
      endpoints: list<commons.EndpointId>
      types: list<commons.TypeId>
      errors: list<commons.ErrorId>
  Endpoint:
    properties:
      endpointId: commons.EndpointId
      endpointName: string
  Type:
    properties:
      typeId: commons.TypeId
      typeName: string
  Error:
    properties:
      errorId: commons.ErrorId
      errorName: string

  CreateApiRequest:
    properties:
      apiName: string

  UpdateApiRequest:
    properties:
      apiName: string
      packages: list<Package>

services:
  http:
    ApiCrudService:
      auth: false
      base-path: /{apiId}
      path-parameters:
        apiId: commons.ApiId
      endpoints:
        create:
          method: POST
          path: /
          request: CreateApiRequest
          response: commons.ApiId
        get:
          method: GET
          path: /
          response: Api
        update:
          method: PUT
          path: /
          request: UpdateApiRequest
        delete:
          method: DELETE
          path: /
