{
  "types": [
    {
      "name": { "fernFilepath": "danny", "name": "MenuItemId" },
      "shape": { "aliasOf": { "primitive": "STRING", "_type": "primitive" }, "_type": "alias" }
    },
    {
      "name": { "fernFilepath": "danny", "name": "OrderId" },
      "shape": { "aliasOf": { "primitive": "LONG", "_type": "primitive" }, "_type": "alias" }
    },
    {
      "name": { "fernFilepath": "danny", "name": "DeliveryMethod" },
      "shape": { "values": [{ "value": "PICKUP" }, { "value": "DELIVERY" }], "_type": "enum" }
    },
    {
      "name": { "fernFilepath": "danny", "name": "OrderStatus" },
      "shape": {
        "discriminant": "_type",
        "types": [
          {
            "discriminantValue": "pickup",
            "valueType": { "name": "PickupOrderStatus", "fernFilepath": "danny", "_type": "named" }
          },
          {
            "discriminantValue": "delivery",
            "valueType": { "name": "DeliveryOrderStatus", "fernFilepath": "danny", "_type": "named" }
          }
        ],
        "_type": "union"
      }
    },
    {
      "name": { "fernFilepath": "danny", "name": "PickupOrderStatus" },
      "shape": {
        "values": [{ "value": "PREPARING" }, { "value": "READY_FOR_PICKUP" }, { "value": "PICKED_UP" }],
        "_type": "enum"
      }
    },
    {
      "name": { "fernFilepath": "danny", "name": "DeliveryOrderStatus" },
      "shape": {
        "values": [{ "value": "PREPARING" }, { "value": "ON_THE_WAY" }, { "value": "DELIVERED" }],
        "_type": "enum"
      }
    }
  ],
  "errors": [
    {
      "name": { "name": "OrderNotFoundError", "fernFilepath": "danny" },
      "http": { "statusCode": 404 },
      "properties": []
    },
    { "name": { "name": "EmptyCartError", "fernFilepath": "danny" }, "http": { "statusCode": 400 }, "properties": [] }
  ],
  "services": {
    "http": [
      {
        "name": { "name": "OrderService", "fernFilepath": "danny" },
        "basePath": "/order",
        "headers": [],
        "endpoints": [
          {
            "endpointId": "addItemToCart",
            "docs": "Adds a menu item to a cart.",
            "method": "POST",
            "path": "/add",
            "parameters": [],
            "queryParameters": [],
            "headers": [],
            "request": {
              "type": {
                "extends": [],
                "properties": [
                  {
                    "key": "menuItemId",
                    "valueType": { "name": "MenuItemId", "fernFilepath": "danny", "_type": "named" }
                  },
                  { "key": "quantity", "valueType": { "primitive": "INTEGER", "_type": "primitive" } }
                ],
                "_type": "object"
              }
            },
            "errors": { "discriminant": "_type", "possibleErrors": [] }
          },
          {
            "endpointId": "placeOrder",
            "docs": "Returns the order price and time of arrival for a new order.",
            "method": "POST",
            "path": "/order/new",
            "parameters": [],
            "queryParameters": [],
            "headers": [],
            "request": {
              "type": {
                "extends": [],
                "properties": [
                  {
                    "key": "deliveryMethod",
                    "valueType": { "name": "DeliveryMethod", "fernFilepath": "danny", "_type": "named" }
                  },
                  {
                    "key": "tip",
                    "valueType": {
                      "container": { "optional": { "primitive": "DOUBLE", "_type": "primitive" }, "_type": "optional" },
                      "_type": "container"
                    }
                  }
                ],
                "_type": "object"
              }
            },
            "response": {
              "type": { "aliasOf": { "name": "OrderId", "fernFilepath": "danny", "_type": "named" }, "_type": "alias" }
            },
            "errors": {
              "discriminant": "_type",
              "possibleErrors": [
                { "discriminantValue": "emptyCart", "error": { "name": "EmptyCartError", "fernFilepath": "danny" } }
              ]
            }
          }
        ]
      }
    ],
    "websocket": [
      {
        "name": { "fernFilepath": "danny", "name": "OrderStatusChannel" },
        "basePath": "/",
        "messages": [
          {
            "name": "getOrderStatus",
            "origin": "CLIENT",
            "body": {
              "type": { "aliasOf": { "name": "OrderId", "fernFilepath": "danny", "_type": "named" }, "_type": "alias" }
            },
            "response": {
              "type": {
                "extends": [],
                "properties": [
                  {
                    "key": "orderStatus",
                    "valueType": { "name": "OrderStatus", "fernFilepath": "danny", "_type": "named" }
                  },
                  { "key": "etaInMinutes", "valueType": { "primitive": "INTEGER", "_type": "primitive" } }
                ],
                "_type": "object"
              },
              "behavior": "ONGOING"
            },
            "errors": {
              "discriminant": "_type",
              "possibleErrors": [
                { "discriminantValue": "notFound", "error": { "name": "OrderNotFoundError", "fernFilepath": "danny" } }
              ]
            }
          }
        ]
      }
    ]
  }
}
