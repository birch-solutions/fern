imports:
  director: director.yml
types:
  MovieId: string
  ActorId: string
  Movie:
    properties:
      id: MovieId
      title: string
      rating: double
  CreateMovieRequest:
    properties:
      title: string
      ratings: list<double>
  Person:
    union:
      actor: ActorId
      director: director.Director
      producer: {}
  RecursiveType:
    extends: CreateMovieRequest
    properties:
      selfRefrencing: list<RecursiveType>
errors:
  NotFoundError:
    status-code: 404
    type: string
services:
  http:
    MoviesService:
      auth: false
      base-path: /movies
      endpoints:
        createMovie:
          method: POST
          path: /
          request: CreateMovieRequest
          response: MovieId
        getMovie:
          method: GET
          path: /{movieId}
          path-parameters:
            movieId: MovieId
          query-parameters:
            movieName:
              type: string
              allow-multiple: true
          response: Movie
          errors:
            - NotFoundError
        delete:
          method: DELETE
          path: /{movieId}
          path-parameters:
            movieId: MovieId
