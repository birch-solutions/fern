---
title: "FastAPI"
---

Fern has a first-class integration with FastAPI. Fern automatically generates:

- Pydantic models for your API types
- Exceptions that you can throw for non-200 responses
- Abstract classes for you to define your business logic.

All the networking/HTTP logic is auto-generated by Fern under the hood.

Repos:

- [Venus](https://github.com/fern-api/venus) is a Python FastAPI server that uses Fern under the hood.
- The [Fern FastAPI Starter](https://github.com/fern-api/fastapi-starter) is a simple example of a Fern-powered FastAPI server.

## Example

Let's walk through the [Fern FastAPI Starter](https://github.com/fern-api/fastapi-starter).

### Step 1: Define the API

File: [fern/api/definition/imdb.yml](https://github.com/fern-api/fastapi-starter/blob/main/fern/api/definition/imdb.yml)

```yaml
services:
  http:
    MoviesService:
      auth: false
      base-path: /movies
      endpoints:
        getMovie:
          method: GET
          path: /{movieId}
          path-parameters:
            movieId: MovieId
          response: Movie
          errors:
            - MovieDoesNotExistError

types:
  MovieId: string

  Movie:
    properties:
      id: MovieId
      title: string
      rating:
        type: double
        docs: The rating scale is one to five stars

  CreateMovieRequest:
    properties:
      title: string
      rating: double

errors:
  MovieDoesNotExistError:
    status-code: 404
    type: MovieId
```

### Step 2: Run `fern generate`

This generates all the boilerplate code into [src/fern_fastapi_starter/generated](https://github.com/fern-api/fastapi-starter/blob/main/src/fern_fastapi_starter/generated/).

```
$ fern generate
[api]: fernapi/fern-fastapi-server Downloaded to src/fern_fastapi_starter/generated/fern
â”Œâ”€
â”‚ âœ“  fernapi/fern-fastapi-server
â””â”€
```

### Step 3: Implement the server

File: [src/fern_fastapi_starter/movies_service.py](https://github.com/fern-api/fastapi-starter/blob/main/src/fern_fastapi_starter/movies_service.py)

Notice you only need to provide the business logic. Just implement the function and Fern takes care of the rest.

```python
from .generated.fern import AbstractMoviesService, Movie, MovieDoesNotExistError, MovieId

class MoviesService(AbstractMoviesService):
    def get_movie(self, *, movie_id: str) -> Movie:
        if movie_id == "titanic":
            return Movie(
                id=MovieId.from_str("titantic"),
                title="Titanic",
                rating=9.8,
            )
        raise MovieDoesNotExistError(MovieId.from_str(movie_id))
```

### Step 4: Compile

If you make mistakes implementing your API, the type checker will warn you.

![Invalid return value](images/invalid_return_value.png)

If you change the signature of the endpoint method, you'll get an error:

![Invalid signature](images/invalid_signature.png)

You can use the command line to check for compile errors:

```
$ poetry run mypy
Success: no issues found in 24 source files
```

### Step 5: Run the server

```
$ poetry run start
INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
INFO:     Started reloader process [32816] using StatReload
INFO:     Started server process [32829]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

### Step 6: Hit the API ðŸš€

```bash
$ curl --location --request GET --silent 'localhost:8080/movies/titanic' | jq .
{
  "id": "titantic",
  "title": "Titanic",
  "rating": 9.8
}

$ curl --location --request GET --silent 'localhost:8080/movies/oceans-11' | jq .
{
  "error": "MovieDoesNotExistError",
  "errorInstanceId": "f6e1d69c-bf97-42d5-bc89-5e42773e3880",
  "content": "oceans-11"
}
```
